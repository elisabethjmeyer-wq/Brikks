<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Brikks - Espace Ã‰lÃ¨ve">
    <title>Mon espace - Brikks</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>

    <!-- ===== HEADER ===== -->
    <header class="eleve-header">
        <div class="header-left">
            <button class="menu-toggle" id="menuToggle" title="Menu">
                â˜°
            </button>
            <a href="#" class="logo">
                <div class="logo-icon">ğŸ“š</div>
                <div class="logo-text">Brikks <span>â€¢ Espace Ã©lÃ¨ve</span></div>
            </a>
        </div>

        <div class="header-right">
            <div class="user-menu">
                <div class="user-pill" id="userPill" onclick="toggleUserMenu()">
                    <div class="user-avatar" id="user-avatar">--</div>
                    <div class="user-info">
                        <div class="user-name" id="user-name">Chargement...</div>
                        <div class="user-class" id="user-class"></div>
                    </div>
                    <span class="user-chevron">â–¼</span>
                </div>
                <div class="user-dropdown" id="user-dropdown">
                    <button class="user-dropdown-item danger" onclick="Auth.logout()">
                        ğŸšª DÃ©connexion
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- ===== SIDEBAR ===== -->
    <aside class="eleve-sidebar" id="sidebar">
        <div class="sidebar-inner">

            <!-- ORGANISATION -->
            <div class="sidebar-section">
                <div class="sidebar-section-title">ğŸ“… Organisation</div>
                <a href="#" class="sidebar-item">
                    <span class="sidebar-item-icon">ğŸ“†</span>
                    <span class="sidebar-item-text">Emploi du temps</span>
                </a>
                <a href="#" class="sidebar-item">
                    <span class="sidebar-item-icon">ğŸ“‚</span>
                    <span class="sidebar-item-text">Classeur modÃ¨le</span>
                </a>
            </div>

            <!-- COURS -->
            <div class="sidebar-section">
                <div class="sidebar-section-title">ğŸ“– Cours</div>
                <a href="#" class="sidebar-item active">
                    <span class="sidebar-item-icon">ğŸ“–</span>
                    <span class="sidebar-item-text">LeÃ§ons</span>
                </a>
                <a href="#" class="sidebar-item">
                    <span class="sidebar-item-icon">ğŸ§ </span>
                    <span class="sidebar-item-text">MÃ©thodologie</span>
                </a>
            </div>

            <!-- S'ENTRAÃNER -->
            <div class="sidebar-section">
                <div class="sidebar-section-title">ğŸ“ S'entraÃ®ner</div>
                <a href="#" class="sidebar-item">
                    <span class="sidebar-item-icon">ğŸŸ¢</span>
                    <span class="sidebar-item-text">Connaissances</span>
                </a>
                <a href="#" class="sidebar-item">
                    <span class="sidebar-item-icon">ğŸŸ </span>
                    <span class="sidebar-item-text">Savoir-faire</span>
                </a>
                <a href="#" class="sidebar-item">
                    <span class="sidebar-item-icon">ğŸŸ£</span>
                    <span class="sidebar-item-text">CompÃ©tences</span>
                </a>
            </div>

            <!-- Ã‰VALUATIONS -->
            <div class="sidebar-section">
                <div class="sidebar-section-title">ğŸ“‹ Ã‰valuations</div>
                <a href="#" class="sidebar-item">
                    <span class="sidebar-item-icon">ğŸ“‹</span>
                    <span class="sidebar-item-text">Mes Ã©valuations</span>
                    <span class="sidebar-item-badge">2</span>
                </a>
                <a href="#" class="sidebar-item">
                    <span class="sidebar-item-icon">ğŸ“Š</span>
                    <span class="sidebar-item-text">Mes notes</span>
                </a>
            </div>

            <!-- RESSOURCES -->
            <div class="sidebar-section">
                <div class="sidebar-section-title">ğŸ“º Ressources</div>
                <a href="#" class="sidebar-item">
                    <span class="sidebar-item-icon">ğŸ¬</span>
                    <span class="sidebar-item-text">VidÃ©os</span>
                    <span class="sidebar-item-badge green">Nouveau</span>
                </a>
                <a href="#" class="sidebar-item">
                    <span class="sidebar-item-icon">ğŸ’¡</span>
                    <span class="sidebar-item-text">Recommandations</span>
                </a>
            </div>

            <!-- AIDE -->
            <div class="sidebar-section">
                <div class="sidebar-section-title">â“ Aide</div>
                <a href="#" class="sidebar-item">
                    <span class="sidebar-item-icon">â“</span>
                    <span class="sidebar-item-text">FAQ</span>
                </a>
                <a href="#" class="sidebar-item">
                    <span class="sidebar-item-icon">âœ‰ï¸</span>
                    <span class="sidebar-item-text">Messagerie</span>
                    <span class="sidebar-item-badge orange">1</span>
                </a>
            </div>

        </div>
    </aside>

    <!-- ===== OVERLAY (mobile) ===== -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>

    <!-- ===== MAIN CONTENT ===== -->
    <main class="eleve-main" id="main">
        <!-- FIL D'ARIANE -->
        <nav class="breadcrumb">
            <a href="#">ğŸ  Accueil</a>
            <span class="separator">â€º</span>
            <span class="current">Mon espace</span>
        </nav>

        <div class="placeholder-content">
            <div class="icon">ğŸ“š</div>
            <h2>Bienvenue sur Brikks !</h2>
            <p>Ton espace personnel pour apprendre et progresser en franÃ§ais, histoire, gÃ©ographie et EMC.</p>
        </div>
    </main>

<!-- Scripts -->
<script src="../js/config.js"></script>
<script src="../js/sheets.js"></script>
<script src="../js/auth.js"></script>
<script src="../js/app.js"></script>
<script src="../components/components.js"></script>

<script>
    const sidebar = document.getElementById('sidebar');
    const sidebarOverlay = document.getElementById('sidebarOverlay');
    const menuToggle = document.getElementById('menuToggle');
    const main = document.getElementById('main');
    const userPill = document.getElementById('userPill');
    const userDropdown = document.getElementById('user-dropdown');

    // Toggle sidebar
    function toggleSidebar() {
        const isDesktop = window.innerWidth >= 1024;

        if (isDesktop) {
            sidebar.classList.toggle('closed');
            main.classList.toggle('expanded');
            menuToggle.classList.toggle('active', !sidebar.classList.contains('closed'));
        } else {
            sidebar.classList.toggle('open');
            sidebarOverlay.classList.toggle('show', sidebar.classList.contains('open'));
            menuToggle.classList.toggle('active', sidebar.classList.contains('open'));
        }
    }

    // Close sidebar (mobile)
    function closeSidebar() {
        sidebar.classList.remove('open');
        sidebarOverlay.classList.remove('show');
        menuToggle.classList.remove('active');
    }

    // Toggle user menu
    function toggleUserMenu() {
        userPill.classList.toggle('active');
        userDropdown.classList.toggle('show');
    }

    // Close user menu when clicking outside
    document.addEventListener('click', function(e) {
        if (!userPill.contains(e.target) && !userDropdown.contains(e.target)) {
            userPill.classList.remove('active');
            userDropdown.classList.remove('show');
        }
    });

    // Menu toggle click
    menuToggle.addEventListener('click', toggleSidebar);

    // Initialize: open sidebar on desktop by default
    if (window.innerWidth >= 1024) {
        sidebar.classList.remove('closed');
        menuToggle.classList.add('active');
    }

    // Handle resize
    window.addEventListener('resize', function() {
        if (window.innerWidth >= 1024) {
            sidebarOverlay.classList.remove('show');
            sidebar.classList.remove('open');
            if (!sidebar.classList.contains('closed')) {
                menuToggle.classList.add('active');
            }
        } else {
            sidebar.classList.add('closed');
            menuToggle.classList.remove('active');
        }
    });

    // VÃ©rifier l'accÃ¨s et afficher les infos utilisateur
    document.addEventListener('DOMContentLoaded', function() {
        const user = Auth.checkAccess(['eleve', 'Ã©lÃ¨ve', 'etudiant', 'Ã©tudiant']);

        if (user) {
            // Initiales
            const prenom = (user.prenom || '').trim();
            const nom = (user.nom || '').trim();
            const initials = (prenom && nom)
                ? (prenom[0] + nom[0]).toUpperCase()
                : (user.identifiant || 'E')[0].toUpperCase();

            document.getElementById('user-avatar').textContent = initials;

            // Nom complet
            const displayName = (prenom && nom)
                ? `${prenom} ${nom}`
                : user.identifiant;
            document.getElementById('user-name').textContent = displayName;

            // Classe
            if (user.classe_id) {
                document.getElementById('user-class').textContent = user.classe_id;
            }
        }
    });
</script>

</body>
</html>
