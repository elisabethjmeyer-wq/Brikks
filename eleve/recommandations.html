<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Brikks - Recommandations">
    <title>Recommandations - Brikks</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/eleve-recommandations.css">
</head>
<body>

<!-- Contenu de la page (sera wrappÃ© par le layout) -->
<div id="recommandations-page" class="page-container">

    <!-- Page Header -->
    <header class="page-header">
        <h1>ğŸ’¡ Recommandations</h1>
        <p>DÃ©couvre des contenus pour enrichir ta culture en lien avec les cours</p>
    </header>

    <!-- Loader -->
    <div class="loader-container" id="loader">
        <div class="loader"></div>
        <p>Chargement des recommandations...</p>
    </div>

    <!-- Contenu principal -->
    <div id="reco-content" style="display: none;">

        <!-- Featured Reco -->
        <div class="featured-reco" id="featuredReco" style="display: none;">
            <div class="featured-image" id="featuredImage">
                <span class="featured-icon">ğŸµ</span>
                <div class="featured-play-btn" id="featuredPlayBtn">â–¶</div>
            </div>
            <div class="featured-content">
                <div class="featured-badges">
                    <span class="featured-badge">â­ Cette semaine</span>
                    <span class="featured-type" id="featuredType">ğŸµ Ã€ Ã©couter</span>
                </div>
                <h2 class="featured-title" id="featuredTitle">Chargement...</h2>
                <p class="featured-description" id="featuredDescription"></p>
                <div class="featured-tags" id="featuredTags"></div>
                <div class="featured-meta">
                    <span id="featuredDate"></span>
                    <span class="resources-badge" id="featuredResources" style="display: none;">ğŸ“ <span id="resourcesCount">0</span> ressources</span>
                </div>
            </div>
        </div>

        <!-- Filters Bar -->
        <div class="filters-bar">
            <input type="text" class="search-input" id="searchInput" placeholder="Rechercher une recommandation...">
            <select class="filter-select" id="filterType">
                <option value="all">Tous les types</option>
                <option value="ecouter">ğŸµ Ã€ Ã©couter</option>
                <option value="regarder">ğŸ¬ Ã€ regarder</option>
                <option value="lire">ğŸ“– Ã€ lire</option>
            </select>
            <select class="filter-select" id="filterDiscipline">
                <option value="all">Toutes les disciplines</option>
            </select>
        </div>

        <!-- Carousels Container -->
        <div id="carouselsContainer">
            <!-- Carousel: Ã€ Ã©couter -->
            <div class="carousel-section" id="carousel-ecouter" style="display: none;">
                <div class="carousel-header">
                    <h2 class="carousel-title">ğŸµ Ã€ Ã©couter</h2>
                    <div class="carousel-nav">
                        <button class="carousel-nav-btn" onclick="EleveRecommandations.scrollCarousel('ecouter', -1)">â®</button>
                        <button class="carousel-nav-btn" onclick="EleveRecommandations.scrollCarousel('ecouter', 1)">â¯</button>
                    </div>
                </div>
                <div class="carousel-track" id="track-ecouter"></div>
            </div>

            <!-- Carousel: Ã€ regarder -->
            <div class="carousel-section" id="carousel-regarder" style="display: none;">
                <div class="carousel-header">
                    <h2 class="carousel-title">ğŸ¬ Ã€ regarder</h2>
                    <div class="carousel-nav">
                        <button class="carousel-nav-btn" onclick="EleveRecommandations.scrollCarousel('regarder', -1)">â®</button>
                        <button class="carousel-nav-btn" onclick="EleveRecommandations.scrollCarousel('regarder', 1)">â¯</button>
                    </div>
                </div>
                <div class="carousel-track" id="track-regarder"></div>
            </div>

            <!-- Carousel: Ã€ lire -->
            <div class="carousel-section" id="carousel-lire" style="display: none;">
                <div class="carousel-header">
                    <h2 class="carousel-title">ğŸ“– Ã€ lire</h2>
                    <div class="carousel-nav">
                        <button class="carousel-nav-btn" onclick="EleveRecommandations.scrollCarousel('lire', -1)">â®</button>
                        <button class="carousel-nav-btn" onclick="EleveRecommandations.scrollCarousel('lire', 1)">â¯</button>
                    </div>
                </div>
                <div class="carousel-track" id="track-lire"></div>
            </div>
        </div>

        <!-- Empty state -->
        <div class="empty-state" id="emptyState" style="display: none;">
            <div class="empty-icon">ğŸ“­</div>
            <h3>Aucune recommandation</h3>
            <p>Ton professeur n'a pas encore partagÃ© de recommandations</p>
        </div>
    </div>
</div>

<!-- MODAL: Lecture intÃ©grÃ©e -->
<div class="modal-overlay hidden" id="recoModal">
    <div class="modal-content modal-large">
        <div class="modal-header">
            <div class="modal-title-info">
                <span class="modal-type" id="modalType">ğŸµ Ã€ Ã©couter</span>
                <h3 class="modal-title" id="modalTitle">Titre</h3>
            </div>
            <button class="modal-close" id="closeRecoModal">Ã—</button>
        </div>
        <div class="modal-body">
            <!-- Zone de lecture intÃ©grÃ©e -->
            <div class="modal-player" id="modalPlayer">
                <div class="player-placeholder" id="playerPlaceholder">
                    <span class="player-icon">ğŸµ</span>
                    <p>Cliquez pour lancer la lecture</p>
                </div>
                <iframe id="playerIframe" src="" allowfullscreen style="display: none;"></iframe>
            </div>
            <!-- Infos -->
            <div class="modal-info">
                <p class="modal-description" id="modalDescription"></p>
                <div class="modal-tags" id="modalTags"></div>
                <div class="modal-meta">
                    <span id="modalDate"></span>
                    <span id="modalDiscipline"></span>
                </div>
                <a href="#" class="modal-external-link" id="modalExternalLink" target="_blank">
                    ğŸ”— Ouvrir dans un nouvel onglet
                </a>
            </div>
        </div>
    </div>
</div>

<!-- Scripts -->
<script src="../js/config.js"></script>
<script src="../js/sheets.js"></script>
<script src="../js/auth.js"></script>
<script src="../js/app.js"></script>
<script src="../components/eleve-layout.js"></script>
<script src="../js/eleve-recommandations.js"></script>

<script>
    // Initialiser le layout Ã©lÃ¨ve puis les recommandations
    document.addEventListener('DOMContentLoaded', async function() {
        await EleveLayout.init('recommandations', 'Recommandations');
        EleveRecommandations.init();
    });
</script>

</body>
</html>
